<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ù‚Ø§Ø¶ÛŒ Ø´Ùˆ â€” Ø¨Ø§Ø²ÛŒ Ù‚Ø¶Ø§ÛŒÛŒ Û²Û° Ù…Ø±Ø­Ù„Ù‡â€ŒØ§ÛŒ</title>
  <style>
    :root{
      --bg1:#1f005c;
      --bg2:#5b0060;
      --bg3:#870160;
      --bg4:#ac255e;
      --bg5:#ca485c;
      --glass-bg: rgba(255,255,255,0.12);
      --glass-stroke: rgba(255,255,255,0.25);
      --text:#f5f7fb;
      --muted:#cfd3df;
      --primary:#7cf0ff;
      --accent:#8cff7a;
      --danger:#ff6b6b;
      --warning:#ffd166;
      --shadow: 0 10px 30px rgba(0,0,0,0.35);
    }

    /* Ù¾Ø³â€ŒØ²Ù…ÛŒÙ†Ù‡ Ú¯Ø±Ø§Ø¯ÛŒØ§Ù†ÛŒ Ù¾ÙˆÛŒØ§ */
    body{
      margin:0;
      min-height:100vh;
      color:var(--text);
      font-family: "IRANSans","Vazirmatn","Tahoma","Segoe UI",system-ui, -apple-system, sans-serif;
      background: linear-gradient(-45deg,var(--bg1),var(--bg2),var(--bg3),var(--bg4),var(--bg5));
      background-size: 400% 400%;
      animation: gradientShift 18s ease infinite;
      overflow-x:hidden;
    }
    @keyframes gradientShift{
      0%{background-position:0% 50%}
      50%{background-position:100% 50%}
      100%{background-position:0% 50%}
    }

    /* Ø­Ø¨Ø§Ø¨â€ŒÙ‡Ø§ÛŒ ØªØ²Ø¦ÛŒÙ†ÛŒ */
    .blob{
      position: fixed;
      border-radius: 50%;
      filter: blur(40px);
      opacity: .35;
      z-index:0;
      animation: float 14s ease-in-out infinite;
    }
    .blob.b1{ width:320px;height:320px; background:#8a2be2; top:5%; left:8%; animation-delay:0s;}
    .blob.b2{ width:260px;height:260px; background:#00d4ff; bottom:12%; right:10%; animation-delay:2s;}
    .blob.b3{ width:200px;height:200px; background:#ff6b6b; top:50%; right:30%; animation-delay:4s;}
    @keyframes float{
      0%,100%{ transform: translateY(0) translateX(0) }
      50%{ transform: translateY(-20px) translateX(10px) }
    }

    /* Ø¸Ø±Ù Ø´ÛŒØ´Ù‡â€ŒØ§ÛŒ Ø§ØµÙ„ÛŒ */
    .wrap{
      position: relative;
      z-index:1;
      max-width: 980px;
      margin: 40px auto 60px;
      padding: 24px;
    }
    .card{
      background: var(--glass-bg);
      border: 1px solid var(--glass-stroke);
      backdrop-filter: blur(12px) saturate(140%);
      border-radius: 20px;
      box-shadow: var(--shadow);
      overflow:hidden;
    }

    /* Ù‡Ø¯Ø± Ùˆ Ø¢Ù…Ø§Ø± */
    .header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
      padding:20px 22px;
      border-bottom:1px solid rgba(255,255,255,.15);
    }
    .title{
      display:flex; align-items:center; gap:10px;
      font-weight: 800; letter-spacing:.2px;
      font-size:22px;
    }
    .badge{
      background: linear-gradient(135deg,#00eaff,#7cff7c);
      color:#0b0f17;
      padding:6px 10px; border-radius:999px;
      font-size:12px; font-weight:700;
    }
    .stats{
      display:flex; gap:10px; flex-wrap:wrap;
    }
    .stat{
      display:flex; align-items:center; gap:8px;
      background: rgba(255,255,255,0.08);
      border:1px solid rgba(255,255,255,0.18);
      padding:8px 12px; border-radius:12px;
      font-size:13px;
    }
    .stat i{font-style:normal; font-weight:700}
    .coin{ color:#ffd166 }
    .score{ color:#8cff7a }
    .mist{ color:#ff8fa3 }

    /* Ù†ÙˆØ§Ø± Ù¾ÛŒØ´Ø±ÙØª */
    .progress{
      padding: 12px 22px;
    }
    .bar{
      width:100%; height:10px; background:rgba(255,255,255,.1);
      border:1px solid rgba(255,255,255,.2);
      border-radius: 999px; overflow:hidden;
    }
    .bar > .fill{
      height:100%; width:0%;
      background: linear-gradient(90deg,#7cf0ff,#8cff7a);
      box-shadow: 0 0 12px rgba(124,240,255,.6);
      transition: width .6s cubic-bezier(.22,.61,.36,1);
    }
    .bar-label{
      margin-top:8px; font-size:12px; color:var(--muted);
      display:flex; justify-content:space-between;
    }

    /* Ø¨Ø¯Ù†Ù‡ Ù…Ø±Ø­Ù„Ù‡ */
    .stage{
      padding: 22px;
      display:grid;
      grid-template-columns: 1fr;
      gap:18px;
    }
    .case{
      background: rgba(255,255,255,.07);
      border:1px solid rgba(255,255,255,.16);
      border-radius:16px;
      padding:16px;
      animation: fadeIn .5s ease both;
    }
    .case h3{
      margin:0 0 6px 0; font-size:18px;
    }
    .case p{
      margin:0; color: var(--muted); line-height:1.9;
    }

    /* Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ */
    .choices{
      display:grid; gap:12px;
    }
    .btn{
      position:relative;
      cursor:pointer;
      border:none;
      padding:14px 16px;
      font-size:15px;
      font-weight:700;
      border-radius:14px;
      color:#0b0f17;
      background: linear-gradient(135deg,#ffffff,#e6fbff);
      box-shadow: 0 10px 18px rgba(0,0,0,.18), inset 0 0 0 0 rgba(0,0,0,0);
      transition: transform .1s ease, box-shadow .2s ease, filter .2s ease;
      text-align:right;
    }
    .btn:hover{ transform: translateY(-2px); filter: brightness(1.03); }
    .btn:active{ transform: translateY(0); box-shadow: 0 6px 14px rgba(0,0,0,.22); }
    .btn .sub{
      display:block; font-weight:600; opacity:.7; font-size:12px;
      color:#263238;
    }
    .btn.correct{
      background: linear-gradient(135deg,#b7ffbf,#7cff7a);
      box-shadow: 0 10px 24px rgba(140,255,122,.35);
      animation: pop .45s ease both;
    }
    .btn.wrong{
      background: linear-gradient(135deg,#ffd6d6,#ffb0b0);
      box-shadow: 0 10px 24px rgba(255,107,107,.35);
      animation: shake .45s ease both;
    }
    .disabled{
      pointer-events:none; opacity:.7; filter: grayscale(.15);
    }

    /* Ø±Ø§Ù‡Ù†Ù…Ø§ */
    .help{
      padding: 0 22px 22px 22px;
    }
    details{
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.16);
      border-radius:14px;
      padding:12px 14px;
    }
    summary{ cursor:pointer; font-weight:800; }
    .help p{ margin:8px 0 0; color:var(--muted); }

    /* Ø§ÙˆÙˆØ±Ù„ÛŒ ÙˆÙ‚ÙÙ‡ ØªÙ†Ø¨ÛŒÙ‡ÛŒ */
    .overlay{
      position:absolute; inset:0;
      background: rgba(11,15,23,.55);
      display:none; align-items:center; justify-content:center;
      backdrop-filter: blur(2px);
    }
    .overlay.show{ display:flex; }
    .pause-box{
      background: rgba(255,255,255,.12);
      border:1px solid rgba(255,255,255,.25);
      border-radius:16px;
      padding:14px 18px;
      text-align:center;
      box-shadow: var(--shadow);
      animation: fadeIn .3s ease both;
    }
    .pause-box h4{ margin:0 0 6px 0; }
    .pause-box p{ margin:0; color:var(--muted) }

    /* Ù¾Ø§ÛŒØ§Ù† Ø¨Ø§Ø²ÛŒ */
    .end{
      display:none; text-align:center; padding:26px;
    }
    .end.show{ display:block; }
    .end h2{ margin-top:0 }
    .pill{
      display:inline-block;
      padding:10px 16px; border-radius:999px;
      background: rgba(255,255,255,.12);
      border:1px solid rgba(255,255,255,.25);
      margin:0 6px; font-weight:800;
    }
    .restart{
      margin-top:14px;
      background: linear-gradient(135deg,#00eaff,#8cff7a);
      color:#0b0f17; border:none; border-radius:12px;
      padding:12px 16px; font-weight:800; cursor:pointer;
      box-shadow: 0 10px 20px rgba(0,234,255,.25);
    }

    /* Ø§Ù†ÛŒÙ…ÛŒØ´Ù†â€ŒÙ‡Ø§ */
    @keyframes fadeIn{ from{opacity:0; transform: translateY(6px)} to{opacity:1; transform: none} }
    @keyframes pop{ 0%{ transform: scale(.98) } 60%{ transform: scale(1.02) } 100%{ transform: scale(1) } }
    @keyframes shake{
      0%,100%{ transform: translateX(0) }
      20%{ transform: translateX(-6px) }
      40%{ transform: translateX(6px) }
      60%{ transform: translateX(-4px) }
      80%{ transform: translateX(4px) }
    }

    /* Ú©Ø§ØºØ° Ø±Ù†Ú¯ÛŒ (Ú©Ù†ÙÙØªÛŒ) */
    .confetti{
      position: absolute;
      width:8px; height:14px;
      border-radius:2px;
      opacity:.9;
      animation: fall 900ms ease-out forwards;
    }
    @keyframes fall{
      to{
        transform: translateY(120px) rotate(240deg);
        opacity:0;
      }
    }

    /* Ø±ÛŒØ³Ù¾Ø§Ù†Ø³ÛŒÙˆ */
    @media (max-width:640px){
      .header{ flex-direction:column; align-items:flex-start }
      .title{ font-size:19px }
      .stats{ width:100% }
    }
  </style>
</head>
<body>
  <!-- Ø­Ø¨Ø§Ø¨â€ŒÙ‡Ø§ÛŒ Ù¾Ø³â€ŒØ²Ù…ÛŒÙ†Ù‡ -->
  <div class="blob b1"></div>
  <div class="blob b2"></div>
  <div class="blob b3"></div>

  <div class="wrap">
    <div class="card" id="game">
      <div class="header">
        <div class="title">
          âš–ï¸ Ù‚Ø§Ø¶ÛŒ Ø´Ùˆ
          <span class="badge">Û²Û° Ù…Ø±Ø­Ù„Ù‡</span>
        </div>
        <div class="stats">
          <div class="stat"><span>Ù…Ø±Ø­Ù„Ù‡:</span> <i id="stageIdx">1</i> / 20</div>
          <div class="stat score"><span>Ø§Ù…ØªÛŒØ§Ø²:</span> <i id="score">0</i></div>
          <div class="stat coin"><span>Ø³Ú©Ù‡:</span> <i id="coins">100</i> ğŸª™</div>
          <div class="stat mist"><span>Ø§Ø´ØªØ¨Ø§Ù‡ Ø§ÛŒÙ† Ù…Ø±Ø­Ù„Ù‡:</span> <i id="mistakes">0</i>/3</div>
        </div>
      </div>

      <div class="progress">
        <div class="bar"><div class="fill" id="progressFill"></div></div>
        <div class="bar-label">
          <span id="caseTitle">Ù¾Ø±ÙˆÙ†Ø¯Ù‡</span>
          <span id="progressText">0% Ù¾ÛŒØ´Ø±ÙØª</span>
        </div>
      </div>

      <div class="stage">
        <div class="case">
          <h3 id="caseHeader">Ù¾Ø±ÙˆÙ†Ø¯Ù‡ Ø´Ù…Ø§Ø±Ù‡ Û±</h3>
          <p id="caseDesc">ØªÙˆØ¶ÛŒØ­Ø§Øª Ù¾Ø±ÙˆÙ†Ø¯Ù‡ Ø¯Ø± Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.</p>
        </div>

        <div class="choices" id="choices"></div>
      </div>

      <div class="help">
        <details>
          <summary>Ø±Ø§Ù‡Ù†Ù…Ø§ Ùˆ Ù‚ÙˆØ§Ù†ÛŒÙ† Ø¨Ø§Ø²ÛŒ</summary>
          <p>Ø¯Ø± Ù‡Ø± Ù…Ø±Ø­Ù„Ù‡ ÛŒÚ© Ù¾Ø±ÙˆÙ†Ø¯Ù‡ Ú©ÙˆØªØ§Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù†ÛŒØ¯ Ùˆ Ø¨Ø§ÛŒØ¯ Ø§Ø² Ù…ÛŒØ§Ù† Ø³Ù‡ Ø­Ú©Ù…ØŒ Ù…Ù†Ø§Ø³Ø¨â€ŒØªØ±ÛŒÙ† Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯.</p>
          <p>Ù‡Ø± Ù¾Ø§Ø³Ø® Ø¯Ø±Ø³Øª: +Û±Û° Ø§Ù…ØªÛŒØ§Ø² Ùˆ +Ûµ Ø³Ú©Ù‡. Ù‡Ø± Ù¾Ø§Ø³Ø® Ù†Ø§Ø¯Ø±Ø³Øª: âˆ’Ûµ Ø³Ú©Ù‡ Ùˆ Ø§Ù†ÛŒÙ…ÛŒØ´Ù† Ø®Ø·Ø§.</p>
          <p>Ø§Ú¯Ø± Û² Ø¨Ø§Ø± Ù¾ÛŒØ§Ù¾ÛŒ Ø§Ø´ØªØ¨Ø§Ù‡ Ú©Ù†ÛŒØ¯ØŒ Ûµ Ø«Ø§Ù†ÛŒÙ‡ ÙˆÙ‚ÙÙ‡ ØªÙ†Ø¨ÛŒÙ‡ÛŒ Ù…ÛŒâ€ŒÚ¯ÛŒØ±ÛŒØ¯. Ø¨Ø§ Ø³ÙˆÙ…ÛŒÙ† Ø§Ø´ØªØ¨Ø§Ù‡ØŒ Ù…Ø±Ø­Ù„Ù‡ Ø¨Ø§ Ø¬Ø±ÛŒÙ…Ù‡ Ø§Ø¶Ø§ÙÙ‡ ØªÙ…Ø§Ù… Ù…ÛŒâ€ŒØ´ÙˆØ¯.</p>
        </details>
      </div>

      <div class="overlay" id="overlay">
        <div class="pause-box">
          <h4>â³ ÙˆÙ‚ÙÙ‡ ØªÙ†Ø¨ÛŒÙ‡ÛŒ</h4>
          <p>Ø¨Ø±Ø§ÛŒ Ø§Ø¯Ø§Ù…Ù‡ <b><span id="cooldown">5</span> Ø«Ø§Ù†ÛŒÙ‡</b> ØµØ¨Ø± Ú©Ù†ÛŒØ¯...</p>
        </div>
      </div>

      <div class="end" id="end">
        <h2>ğŸ‰ Ù¾Ø§ÛŒØ§Ù† Ø¨Ø§Ø²ÛŒ</h2>
        <p><span class="pill">Ø§Ù…ØªÛŒØ§Ø² Ú©Ù„: <b id="finalScore">0</b></span> <span class="pill">Ø³Ú©Ù‡ Ù†Ù‡Ø§ÛŒÛŒ: <b id="finalCoins">0</b> ğŸª™</span></p>
        <p id="finalMsg" style="color:#cfead3; margin-top:8px"></p>
        <button class="restart" id="restart">Ø´Ø±ÙˆØ¹ Ø¯ÙˆØ¨Ø§Ø±Ù‡</button>
      </div>
    </div>
  </div>

  <script>
    // --- Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Û²Û° Ù…Ø±Ø­Ù„Ù‡ (Ú©Ø§Ù…Ù„Ø§ ÙØ§Ø±Ø³ÛŒ) ---
    const levels = [
      {
        title: "Ø³Ø±Ù‚Øª Ø®Ø±Ø¯ Ø§Ø² ÙØ±ÙˆØ´Ú¯Ø§Ù‡",
        desc: "Ù…ØªÙ‡Ù… ÛŒÚ© Ù‚ÙˆØ·ÛŒ Ù†ÙˆØ´Ø§Ø¨Ù‡ Ø±Ø§ Ø¨Ø¯ÙˆÙ† Ù¾Ø±Ø¯Ø§Ø®Øª Ø¨Ø±Ø¯Ø§Ø´ØªÙ‡ Ø§Ø³Øª. Ø³Ø§Ø¨Ù‚Ù‡ Ú©ÛŒÙØ±ÛŒ Ù†Ø¯Ø§Ø±Ø¯ Ùˆ Ø¨Ù„Ø§ÙØ§ØµÙ„Ù‡ Ø¹Ø°Ø±Ø®ÙˆØ§Ù‡ÛŒ Ú©Ø±Ø¯Ù‡.",
        options: [
          "ØªØ°Ú©Ø± Ú©ØªØ¨ÛŒ + Û¸ Ø³Ø§Ø¹Øª Ø®Ø¯Ù…Ø§Øª Ø¹Ù…ÙˆÙ…ÛŒ",
          "Ø¬Ø±ÛŒÙ…Ù‡ Ù†Ù‚Ø¯ÛŒ Ø³Ø¨Ú© + Ø¯ÙˆØ±Ù‡ Ø¢Ù…ÙˆØ²Ø´ÛŒ Ø­Ù‚ÙˆÙ‚ Ø´Ù‡Ø±ÙˆÙ†Ø¯ÛŒ",
          "Ø­Ø¨Ø³ ØªØ¹Ø²ÛŒØ±ÛŒ Ú©ÙˆØªØ§Ù‡â€ŒÙ…Ø¯Øª"
        ],
        correct: 1
      },
      {
        title: "Ø¹Ø¨ÙˆØ± Ø§Ø² Ú†Ø±Ø§Øº Ù‚Ø±Ù…Ø²",
        desc: "Ø±Ø§Ù†Ù†Ø¯Ù‡ Ø§Ø² Ú†Ø±Ø§Øº Ù‚Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ú©Ø±Ø¯Ù‡ Ø§Ù…Ø§ Ø­Ø§Ø¯Ø«Ù‡â€ŒØ§ÛŒ Ø±Ø® Ù†Ø¯Ø§Ø¯Ù‡ Ùˆ Ø¨ÛŒÙ…Ù‡ Ù…Ø¹ØªØ¨Ø± Ø¯Ø§Ø±Ø¯.",
        options: [
          "Ø§Ø®Ø·Ø§Ø± Ùˆ Ø¶Ø¨Ø· Ú¯ÙˆØ§Ù‡ÛŒÙ†Ø§Ù…Ù‡ Ø¨Ø±Ø§ÛŒ ÛŒÚ© Ù…Ø§Ù‡",
          "Ø¬Ø±ÛŒÙ…Ù‡ Ù†Ù‚Ø¯ÛŒ Ù…ØªØ¹Ø§Ø±Ù + ÛŒÚ© Ú©Ø§Ø±Ú¯Ø§Ù‡ Ø§ÛŒÙ…Ù†ÛŒ Ø±Ø§Ù†Ù†Ø¯Ú¯ÛŒ",
          "Ø­Ø¨Ø³ ØªØ¹Ù„ÛŒÙ‚ÛŒ Ø¨Ù‡ Ù…Ø¯Øª Ø³Ù‡ Ù…Ø§Ù‡"
        ],
        correct: 1
      },
      {
        title: "ØªØ®Ø±ÛŒØ¨ Ø´ÛŒØ´Ù‡ Ø§ØªÙˆØ¨ÙˆØ³ Ø´Ù‡Ø±ÛŒ",
        desc: "Ø¯Ø± Ù†Ø²Ø§Ø¹ Ù„ÙØ¸ÛŒØŒ Ø´ÛŒØ´Ù‡ Ø§ØªÙˆØ¨ÙˆØ³ Ø´Ù‡Ø±ÛŒ Ø´Ú©Ø³ØªÙ‡ Ø´Ø¯Ù‡ Ùˆ Ø´Ù‡Ø±Ø¯Ø§Ø±ÛŒ Ù…Ø·Ø§Ù„Ø¨Ù‡ Ø®Ø³Ø§Ø±Øª Ø¯Ø§Ø±Ø¯.",
        options: [
          "Ø§Ù„Ø²Ø§Ù… Ø¨Ù‡ Ø¬Ø¨Ø±Ø§Ù† Ú©Ø§Ù…Ù„ Ø®Ø³Ø§Ø±Øª + Ø®Ø¯Ù…Ø§Øª Ø¹Ù…ÙˆÙ…ÛŒ",
          "ØªÙ†Ù‡Ø§ ØªØ°Ú©Ø± Ø´ÙØ§Ù‡ÛŒ",
          "Ø­Ø¨Ø³ ØªØ¹Ø²ÛŒØ±ÛŒ Ø·ÙˆÙ„Ø§Ù†ÛŒ"
        ],
        correct: 0
      },
      {
        title: "Ø¬Ø¹Ù„ Ú©Ø§Ø±Øª Ø¯Ø§Ù†Ø´Ø¬ÙˆÛŒÛŒ",
        desc: "Ø¨Ø±Ø§ÛŒ Ø¯Ø±ÛŒØ§ÙØª ØªØ®ÙÛŒÙØŒ Ú©Ø§Ø±Øª Ø¯Ø§Ù†Ø´Ø¬ÙˆÛŒÛŒ Ø¬Ø¹Ù„ÛŒ Ø§Ø±Ø§Ø¦Ù‡ Ø´Ø¯Ù‡ Ø§Ø³Øª. Ø§Ø¹ØªØ±Ø§Ù Ùˆ Ø§Ø¸Ù‡Ø§Ø± Ù†Ø¯Ø§Ù…Øª ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯.",
        options: [
          "Ù„ØºÙˆ Ù‡Ù…Ù‡ ØªØ®ÙÛŒÙâ€ŒÙ‡Ø§ Ø¨Ø±Ø§ÛŒ Û¶ Ù…Ø§Ù‡ + Ø¯ÙˆØ±Ù‡ Ø§Ø®Ù„Ø§Ù‚ Ø´Ù‡Ø±ÙˆÙ†Ø¯ÛŒ",
          "Ø¬Ø±ÛŒÙ…Ù‡ Ø³Ù†Ú¯ÛŒÙ† + Ø³Ø§Ø¨Ù‚Ù‡ Ú©ÛŒÙØ±ÛŒ Ø¯Ø§Ø¦Ù…",
          "Ø­Ø¨Ø³ ØªØ¹Ø²ÛŒØ±ÛŒ"
        ],
        correct: 0
      },
      {
        title: "ØªÙˆÙ‡ÛŒÙ† Ø¯Ø± ÙØ¶Ø§ÛŒ Ù…Ø¬Ø§Ø²ÛŒ",
        desc: "Ù…ØªÙ‡Ù… Ø§Ù„ÙØ§Ø¸ ØªÙˆÙ‡ÛŒÙ†â€ŒØ¢Ù…ÛŒØ² Ù…Ù†ØªØ´Ø± Ú©Ø±Ø¯Ù‡ Ùˆ Ø³Ù¾Ø³ Ø¹Ø°Ø±Ø®ÙˆØ§Ù‡ÛŒ Ø¹Ù…ÙˆÙ…ÛŒ Ù†Ù…ÙˆØ¯Ù‡ Ùˆ Ù¾Ø³Øª Ø±Ø§ Ø­Ø°Ù Ú©Ø±Ø¯Ù‡ Ø§Ø³Øª.",
        options: [
          "Ù…ÛŒØ§Ù†Ø¬ÛŒÚ¯Ø±ÛŒ + ØªØ¹Ù‡Ø¯ Ú©ØªØ¨ÛŒ + Ú©Ø§Ø±Ú¯Ø§Ù‡ Ø³ÙˆØ§Ø¯ Ø±Ø³Ø§Ù†Ù‡â€ŒØ§ÛŒ",
          "Ø¬Ø±ÛŒÙ…Ù‡ Ø³Ù†Ú¯ÛŒÙ† Ùˆ Ù…Ù†Ø¹ Ø¯Ø§Ø¦Ù…ÛŒ Ø§Ø² Ø´Ø¨Ú©Ù‡â€ŒÙ‡Ø§ÛŒ Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ",
          "Ø­Ø¨Ø³ ØªØ¹Ø²ÛŒØ±ÛŒ"
        ],
        correct: 0
      },
      {
        title: "Ø´Ú©Ø§Ø± ØºÛŒØ±Ù…Ø¬Ø§Ø²",
        desc: "ÛŒÚ© Ù¾Ø±Ù†Ø¯Ù‡ Ø­ÙØ§Ø¸Øªâ€ŒØ´Ø¯Ù‡ Ø´Ú©Ø§Ø± Ø´Ø¯Ù‡ Ø§Ø³Øª. Ø§Ø¨Ø²Ø§Ø± Ø´Ú©Ø§Ø± Ø¶Ø¨Ø· Ø´Ø¯Ù‡.",
        options: [
          "ØªØ°Ú©Ø± Ø³Ø§Ø¯Ù‡",
          "Ø¬Ø±ÛŒÙ…Ù‡ Ù‚Ø§Ù†ÙˆÙ†ÛŒ + Ø¶Ø¨Ø· Ø§Ø¯ÙˆØ§Øª + Ø¯ÙˆØ±Ù‡ Ù…Ø­ÛŒØ·â€ŒØ²ÛŒØ³Øª",
          "Ø­Ø¨Ø³ ØªØ¹Ø²ÛŒØ±ÛŒ Ø¨Ù„Ù†Ø¯Ù…Ø¯Øª"
        ],
        correct: 1
      },
      {
        title: "Ø§Ø®ØªÙ„Ø§Ø³ Ø¬Ø²Ø¦ÛŒ Ø¨Ø§ Ø§Ø³ØªØ±Ø¯Ø§Ø¯",
        desc: "Ú©Ø§Ø±Ù…Ù†Ø¯ Ù…Ø¨Ù„Øº Ú©Ù…ÛŒ Ø±Ø§ Ø¨Ø±Ø¯Ø§Ø´ØªÙ‡ Ø§Ù…Ø§ Ø³Ø±ÛŒØ¹Ø§Ù‹ Ø¨Ø§Ø²Ú¯Ø±Ø¯Ø§Ù†Ø¯Ù‡ Ø§Ø³Øª. Ø§Ø¹ØªÙ…Ø§Ø¯ Ø¹Ù…ÙˆÙ…ÛŒ Ù…Ø®Ø¯ÙˆØ´ Ø´Ø¯Ù‡.",
        options: [
          "ØªÙ†Ù‡Ø§ Ø§Ø®Ø·Ø§Ø± Ø§Ø¯Ø§Ø±ÛŒ",
          "Ø¬Ø±ÛŒÙ…Ù‡ Ùˆ Ù…Ø­Ø±ÙˆÙ…ÛŒØª Ù…ÙˆÙ‚Øª Ø§Ø² Ø³Ù…Øª + Ø¨Ø§Ø²Ú¯Ø±Ø¯Ø§Ù†Ø¯Ù† ÙˆØ¬Ù‡",
          "Ø­Ø¨Ø³ Ø³Ù†Ú¯ÛŒÙ†"
        ],
        correct: 1
      },
      {
        title: "Ø¶Ø±Ø¨ Ùˆ Ø¬Ø±Ø­ Ø®ÙÛŒÙ",
        desc: "Ù†Ø²Ø§Ø¹ Ø®ÛŒØ§Ø¨Ø§Ù†ÛŒ Ø¨Ø¯ÙˆÙ† Ø³Ù„Ø§Ø­ØŒ Ú©Ø¨ÙˆØ¯ÛŒ Ø³Ø·Ø­ÛŒ. Ø·Ø±ÙÛŒÙ† ØªÙ…Ø§ÛŒÙ„ Ø¨Ù‡ Ø³Ø§Ø²Ø´ Ø¯Ø§Ø±Ù†Ø¯.",
        options: [
          "Ù…ÛŒØ§Ù†Ø¬ÛŒÚ¯Ø±ÛŒ + Ø¹Ø°Ø±Ø®ÙˆØ§Ù‡ÛŒ Ø±Ø³Ù…ÛŒ + Ø®Ø¯Ù…Ø§Øª Ø¹Ù…ÙˆÙ…ÛŒ",
          "Ø¬Ø±ÛŒÙ…Ù‡ Ø³Ù†Ú¯ÛŒÙ† + Ø³Ø§Ø¨Ù‚Ù‡ Ú©ÛŒÙØ±ÛŒ",
          "Ø­Ø¨Ø³ ØªØ¹Ø²ÛŒØ±ÛŒ"
        ],
        correct: 0
      },
      {
        title: "Ù†ÙÙˆØ° Ø¨Ù‡ Ø§ÛŒÙ…ÛŒÙ„",
        desc: "ÙˆØ±ÙˆØ¯ ØºÛŒØ±Ù…Ø¬Ø§Ø² Ø¨Ù‡ Ø­Ø³Ø§Ø¨ Ø§ÛŒÙ…ÛŒÙ„ Ø¨Ø¯ÙˆÙ† Ø§Ù†ØªØ´Ø§Ø± Ù…Ø­ØªÙˆØ§. Ù†Ù‚Ø¶ Ø­Ø±ÛŒÙ… Ø®ØµÙˆØµÛŒ.",
        options: [
          "ØªØ°Ú©Ø± Ø³Ø§Ø¯Ù‡",
          "Ø¬Ø±ÛŒÙ…Ù‡ Ùˆ Ø¯ÙˆØ±Ù‡ Ø­ÙØ¸ Ø­Ø±ÛŒÙ… Ø®ØµÙˆØµÛŒ + ØªØ¹Ù‡Ø¯ Ø¹Ø¯Ù… ØªÚ©Ø±Ø§Ø±",
          "Ø­Ø¨Ø³ ØªØ¹Ø²ÛŒØ±ÛŒ"
        ],
        correct: 1
      },
      {
        title: "Ø¢ØªØ´â€ŒØ²Ø¯Ù† Ø³Ø·Ù„ Ø²Ø¨Ø§Ù„Ù‡",
        desc: "Ø¢ØªØ´â€ŒØ³ÙˆØ²ÛŒ Ø¹Ù…Ø¯ÛŒ Ú©ÙˆÚ†Ú© Ø¯Ø± ÙØ¶Ø§ÛŒ Ø¹Ù…ÙˆÙ…ÛŒØŒ Ø¨Ø¯ÙˆÙ† Ø®Ø³Ø§Ø±Øª Ø¬Ø§Ù†ÛŒ.",
        options: [
          "Ø¬Ø±ÛŒÙ…Ù‡ + Ø®Ø¯Ù…Ø§Øª Ø¹Ù…ÙˆÙ…ÛŒ Ù…Ø±ØªØ¨Ø· Ø¨Ø§ Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ Ø´Ù‡Ø±",
          "Ø¨ÛŒâ€ŒØ§Ù‡Ù…ÛŒØª ØªÙ„Ù‚ÛŒ Ø´ÙˆØ¯",
          "Ø­Ø¨Ø³ Ø·ÙˆÙ„Ø§Ù†ÛŒ"
        ],
        correct: 0
      },
      {
        title: "Ø³ÙˆØ§Ø± Ø´Ø¯Ù† Ø¨Ø¯ÙˆÙ† Ø¨Ù„ÛŒØª (Ø³ÙˆÙ…ÛŒÙ† Ø¨Ø§Ø±)",
        desc: "Ù…Ø³Ø§ÙØ± Ø¨Ø±Ø§ÛŒ Ø³ÙˆÙ…ÛŒÙ† Ø¨Ø§Ø± Ø¨Ø¯ÙˆÙ† Ø¨Ù„ÛŒØª Ø³ÙˆØ§Ø± Ù…ØªØ±Ùˆ Ø´Ø¯Ù‡ Ø§Ø³Øª.",
        options: [
          "ØªØ°Ú©Ø± Ù…Ø¬Ø¯Ø¯",
          "Ø¬Ø±ÛŒÙ…Ù‡ ØªØ´Ø¯ÛŒØ¯ÛŒ + Ø§Ù„Ø²Ø§Ù… Ø¨Ù‡ Ø®Ø±ÛŒØ¯ Ø¨Ù„ÛŒØª Ù…Ø§Ù‡Ø§Ù†Ù‡",
          "Ø­Ø¨Ø³ ØªØ¹Ø²ÛŒØ±ÛŒ"
        ],
        correct: 1
      },
      {
        title: "Ù…Ø²Ø§Ø­Ù…Øª ØªÙ„ÙÙ†ÛŒ Ù…Ú©Ø±Ø±",
        desc: "ØªÙ…Ø§Ø³â€ŒÙ‡Ø§ÛŒ Ø¢Ø²Ø§Ø±Ø¯Ù‡Ù†Ø¯Ù‡ ØªÚ©Ø±Ø§Ø±ÛŒ Ø«Ø¨Øª Ø´Ø¯Ù‡ Ø§Ø³Øª.",
        options: [
          "Ù…ÛŒØ§Ù†Ø¬ÛŒÚ¯Ø±ÛŒ Ùˆ Ù‡Ø´Ø¯Ø§Ø± Ø¢Ø®Ø±",
          "Ø¬Ø±ÛŒÙ…Ù‡ Ùˆ Ù…Ø­Ø±ÙˆÙ…ÛŒØª Ù…ÙˆÙ‚Øª Ø§Ø² Ø®Ø·ÙˆØ· + Ø¯ÙˆØ±Ù‡ Ø¢Ø²Ø§Ø± Ø³Ø§ÛŒØ¨Ø±ÛŒ",
          "Ø­Ø¨Ø³ ØªØ¹Ø²ÛŒØ±ÛŒ"
        ],
        correct: 1
      },
      {
        title: "Ù†Ù‚Ø§Ø´ÛŒ Ø±ÙˆÛŒ Ø¯ÛŒÙˆØ§Ø± Ù…Ø¯Ø±Ø³Ù‡",
        desc: "Ú¯Ø±Ø§ÙÛŒØªÛŒ Ø¹Ù…Ø¯ÛŒ Ø±ÙˆÛŒ Ø¯ÛŒÙˆØ§Ø± Ù…Ø¯Ø±Ø³Ù‡. Ø¨Ø¯ÙˆÙ† ØªÙˆÙ‡ÛŒÙ†â€ŒØ¢Ù…ÛŒØ² Ø¨ÙˆØ¯Ù†.",
        options: [
          "Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ Ùˆ Ù…Ø±Ù…Øª Ø¯ÛŒÙˆØ§Ø± + Ú©Ø§Ø±Ú¯Ø§Ù‡ Ø­Ù‚ÙˆÙ‚ Ù…Ø§Ù„Ú©ÛŒØª",
          "Ø¨ÛŒâ€ŒÙ…Ø¬Ø§Ø²Ø§Øª",
          "Ø­Ø¨Ø³"
        ],
        correct: 0
      },
      {
        title: "Ú©Ù„Ø§Ù‡â€ŒØ¨Ø±Ø¯Ø§Ø±ÛŒ Ø§ÛŒÙ†ØªØ±Ù†ØªÛŒ",
        desc: "ÙØ±ÙˆØ´ Ú©Ø§Ù„Ø§ÛŒ Ø¬Ø¹Ù„ÛŒ Ø¨Ù‡ Ú†Ù†Ø¯ Ù†ÙØ± Ùˆ Ø¹Ø¯Ù… Ø§Ø³ØªØ±Ø¯Ø§Ø¯ ÙˆØ¬Ù‡.",
        options: [
          "ØªØ°Ú©Ø±",
          "Ø¬Ø±ÛŒÙ…Ù‡ Ø³Ù†Ú¯ÛŒÙ† + Ø§Ø³ØªØ±Ø¯Ø§Ø¯ Ú©Ø§Ù…Ù„ + Ù…Ø­Ø±ÙˆÙ…ÛŒØª Ø§Ø² Ù¾Ù„ØªÙØ±Ù…",
          "Ø­Ø¨Ø³ Ø¨Ø³ÛŒØ§Ø± Ø·ÙˆÙ„Ø§Ù†ÛŒ"
        ],
        correct: 1
      },
      {
        title: "Ø±Ø§Ù†Ù†Ø¯Ú¯ÛŒ Ø¯Ø± Ù…Ø³ØªÛŒ",
        desc: "ØªØ³Øª Ù…Ø«Ø¨Øª Ø§Ù„Ú©Ù„ØŒ Ø­Ø§Ø¯Ø«Ù‡â€ŒØ§ÛŒ Ø±Ø® Ù†Ø¯Ø§Ø¯Ù‡.",
        options: [
          "Ø¬Ø±ÛŒÙ…Ù‡ ØªØ´Ø¯ÛŒØ¯ÛŒ + ØªØ¹Ù„ÛŒÙ‚ Ú¯ÙˆØ§Ù‡ÛŒÙ†Ø§Ù…Ù‡ + Ø¯ÙˆØ±Ù‡ Ø¨Ø§Ø²Ø¢Ù…ÙˆØ²ÛŒ",
          "ØªØ°Ú©Ø±",
          "Ø­Ø¨Ø³ Ø·ÙˆÙ„Ø§Ù†ÛŒ"
        ],
        correct: 0
      },
      {
        title: "Ù†Ú¯Ù‡Ø¯Ø§Ø±ÛŒ Ø­ÛŒÙˆØ§Ù† Ù…Ù…Ù†ÙˆØ¹ Ø¯Ø± Ù…Ø¬ØªÙ…Ø¹",
        desc: "Ø¹Ù„ÛŒâ€ŒØ±ØºÙ… ØªØ°Ú©Ø±Ø§Øª Ù…Ø¯ÛŒØ±ÛŒØªØŒ Ù…Ù‚Ø±Ø±Ø§Øª Ù…Ø¬ØªÙ…Ø¹ Ø±Ø¹Ø§ÛŒØª Ù†Ø´Ø¯Ù‡.",
        options: [
          "Ù…ÛŒØ§Ù†Ø¬ÛŒÚ¯Ø±ÛŒ + ÛŒØ§ÙØªÙ† Ø±Ø§Ù‡â€ŒØ­Ù„ (Ø³Ø±ÙˆØµØ¯Ø§/Ø¨Ù‡Ø¯Ø§Ø´Øª)",
          "Ø¬Ø±ÛŒÙ…Ù‡ Ø¯Ø§Ø®Ù„ÛŒ Ù…Ø¬ØªÙ…Ø¹ + ØªØ¹Ù‡Ø¯ Ø±Ø¹Ø§ÛŒØª Ù…Ù‚Ø±Ø±Ø§Øª",
          "Ø­Ø¨Ø³"
        ],
        correct: 1
      },
      {
        title: "Ù…Ø²Ø§Ø­Ù…Øª ØµÙˆØªÛŒ Ù†ÛŒÙ…Ù‡â€ŒØ´Ø¨",
        desc: "Ù¾Ø®Ø´ Ù…ÙˆØ³ÛŒÙ‚ÛŒ Ø¨Ø³ÛŒØ§Ø± Ø¨Ù„Ù†Ø¯ Ø¯Ø± Ø³Ø§Ø¹Ø§Øª Ø§Ø³ØªØ±Ø§Ø­ØªØŒ Ø³Ø§Ø¨Ù‚Ù‡ Ù‚Ø¨Ù„ÛŒ Ù†Ø¯Ø§Ø±Ø¯.",
        options: [
          "Ø§Ø®Ø·Ø§Ø± Ø±Ø³Ù…ÛŒ + Ø¬Ø±ÛŒÙ…Ù‡ Ø³Ø¨Ú©",
          "Ø­Ø¨Ø³",
          "Ø¨ÛŒâ€ŒØ§Ù‡Ù…ÛŒØª"
        ],
        correct: 0
      },
      {
        title: "Ø¢Ù„ÙˆØ¯Ú¯ÛŒ Ù…Ø­ÛŒØ·â€ŒØ²ÛŒØ³Øª ØµÙ†Ø¹ØªÛŒ",
        desc: "Ø±Ù‡Ø§Ø³Ø§Ø²ÛŒ Ù¾Ø³Ù…Ø§Ù†Ø¯ Ø¯Ø± Ø·Ø¨ÛŒØ¹Øª ØªÙˆØ³Ø· ÙˆØ§Ø­Ø¯ ØªÙˆÙ„ÛŒØ¯ÛŒ.",
        options: [
          "ØªØ°Ú©Ø±",
          "Ø¬Ø±ÛŒÙ…Ù‡ Ø³Ù†Ú¯ÛŒÙ† + Ø§Ù„Ø²Ø§Ù… Ø¨Ù‡ Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ Ùˆ Ø§ØµÙ„Ø§Ø­ ÙØ±Ø¢ÛŒÙ†Ø¯",
          "Ø­Ø¨Ø³ Ø·ÙˆÙ„Ø§Ù†ÛŒ Ø¨Ø±Ø§ÛŒ Ù‡Ù…Ù‡ Ú©Ø§Ø±Ú©Ù†Ø§Ù†"
        ],
        correct: 1
      },
      {
        title: "Ø§ÙØ´Ø§ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù…Ø­Ø±Ù…Ø§Ù†Ù‡ Ø´Ø±Ú©Øª",
        desc: "Ú©Ø§Ø±Ù…Ù†Ø¯ Ø§Ø³Ù†Ø§Ø¯ Ø¯Ø§Ø®Ù„ÛŒ Ø±Ø§ Ù…Ù†ØªØ´Ø± Ú©Ø±Ø¯Ù‡. Ø®Ø³Ø§Ø±Øª Ø§Ø¹ØªØ¨Ø§Ø± ÙˆØ§Ø±Ø¯ Ø´Ø¯Ù‡.",
        options: [
          "Ù…ÛŒØ§Ù†Ø¬ÛŒÚ¯Ø±ÛŒ",
          "Ø¬Ø±ÛŒÙ…Ù‡ Ùˆ Ù…Ø­Ø±ÙˆÙ…ÛŒØª Ø´ØºÙ„ÛŒ Ù…ÙˆÙ‚Øª + Ø¯ÙˆØ±Ù‡ Ø§Ø®Ù„Ø§Ù‚ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ",
          "Ø­Ø¨Ø³ Ø·ÙˆÙ„Ø§Ù†ÛŒ"
        ],
        correct: 1
      },
      {
        title: "Ø­Ù…Ù„ Ø³Ù„Ø§Ø­ Ø³Ø±Ø¯ Ø¯Ø± Ø§Ù…Ø§Ú©Ù† Ø¹Ù…ÙˆÙ…ÛŒ",
        desc: "Ù‡Ù…Ø±Ø§Ù‡ Ø¯Ø§Ø´ØªÙ† Ø³Ù„Ø§Ø­ Ø³Ø±Ø¯ Ø¨Ø¯ÙˆÙ† Ø§Ø³ØªÙØ§Ø¯Ù‡. Ù†Ú¯Ø±Ø§Ù†ÛŒ Ø¹Ù…ÙˆÙ…ÛŒ Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯Ù‡.",
        options: [
          "Ø¶Ø¨Ø· Ø³Ù„Ø§Ø­ + Ø¬Ø±ÛŒÙ…Ù‡ + Ø¯ÙˆØ±Ù‡ Ø¢Ú¯Ø§Ù‡ÛŒ Ø§Ø² Ù‚ÙˆØ§Ù†ÛŒÙ† Ø³Ù„Ø§Ø­",
          "Ø¨ÛŒâ€ŒØ§Ù‡Ù…ÛŒØª",
          "Ø­Ø¨Ø³ Ø·ÙˆÙ„Ø§Ù†ÛŒ"
        ],
        correct: 0
      },
    ];

    // --- ÙˆØ¶Ø¹ÛŒØª Ø¨Ø§Ø²ÛŒ ---
    let idx = 0;
    let score = 0;
    let coins = 100;
    let mistakes = 0;
    let locked = false;

    // --- Ø§Ø±Ø¬Ø§Ø¹â€ŒÙ‡Ø§ ---
    const stageIdxEl = document.getElementById("stageIdx");
    const scoreEl = document.getElementById("score");
    const coinsEl = document.getElementById("coins");
    const mistakesEl = document.getElementById("mistakes");
    const caseTitleEl = document.getElementById("caseTitle");
    const caseHeaderEl = document.getElementById("caseHeader");
    const caseDescEl = document.getElementById("caseDesc");
    const choicesEl = document.getElementById("choices");
    const progressFillEl = document.getElementById("progressFill");
    const progressTextEl = document.getElementById("progressText");
    const overlayEl = document.getElementById("overlay");
    const cooldownEl = document.getElementById("cooldown");
    const endEl = document.getElementById("end");
    const finalScoreEl = document.getElementById("finalScore");
    const finalCoinsEl = document.getElementById("finalCoins");
    const finalMsgEl = document.getElementById("finalMsg");
    const restartBtn = document.getElementById("restart");

    function formatPercent(v){ return Math.round(v*100) }

    function renderLevel(){
      locked = false;
      mistakes = 0;
      mistakesEl.textContent = mistakes.toString();

      const L = levels[idx];
      stageIdxEl.textContent = (idx+1).toString();
      caseTitleEl.textContent = `Ù¾Ø±ÙˆÙ†Ø¯Ù‡: ${L.title}`;
      caseHeaderEl.textContent = `Ù¾Ø±ÙˆÙ†Ø¯Ù‡ Ø´Ù…Ø§Ø±Ù‡ ${idx+1} â€” ${L.title}`;
      caseDescEl.textContent = L.desc;

      const progress = (idx)/levels.length;
      progressFillEl.style.width = `${progress*100}%`;
      progressTextEl.textContent = `${formatPercent(progress)}% Ù¾ÛŒØ´Ø±ÙØª`;

      choicesEl.innerHTML = "";
      L.options.forEach((opt, i)=>{
        const btn = document.createElement("button");
        btn.className = "btn";
        btn.innerHTML = `${opt} <span class="sub">Ú¯Ø²ÛŒÙ†Ù‡ ${i+1}</span>`;
        btn.addEventListener("click", ()=> choose(i, btn));
        choicesEl.appendChild(btn);
      });
    }

    function updateHUD(){
      scoreEl.textContent = score.toString();
      coinsEl.textContent = coins.toString();
      mistakesEl.textContent = mistakes.toString();
    }

    function lockChoices(state){
      const buttons = choicesEl.querySelectorAll(".btn");
      buttons.forEach(b => b.classList.toggle("disabled", state));
      locked = state;
    }

    function sprinkleConfetti(x, y){
      const colors = ["#7cff7a","#7cf0ff","#ffd166","#ff6b6b","#c492ff"];
      for(let i=0;i<24;i++){
        const c = document.createElement("div");
        c.className = "confetti";
        c.style.left = (x + (Math.random()*120-60))+"px";
        c.style.top = (y + (Math.random()*40-20))+"px";
        c.style.background = colors[Math.floor(Math.random()*colors.length)];
        c.style.transform = `translateY(0) rotate(${Math.random()*120}deg)`;
        document.body.appendChild(c);
        setTimeout(()=> c.remove(), 1000);
      }
    }

    function choose(i, btn){
      if(locked) return;
      const L = levels[idx];
      const buttons = choicesEl.querySelectorAll(".btn");
      lockChoices(true);

      if(i === L.correct){
        btn.classList.add("correct");
        score += 10;
        coins += 5;
        updateHUD();

        // Ù…Ø­Ù„ Ú©Ù„ÛŒÚ© ØªÙ‚Ø±ÛŒØ¨ÛŒ Ø¨Ø±Ø§ÛŒ Ú©Ù†ÙØªÛŒ
        const rect = btn.getBoundingClientRect();
        sprinkleConfetti(rect.left + rect.width/2, rect.top + window.scrollY);

        setTimeout(()=>{
          // Ø§Ú¯Ø± Ø¢Ø®Ø± Ù†ÛŒØ³ØªØŒ Ø¨Ø±Ùˆ Ø¨Ø¹Ø¯ÛŒ
          nextLevel();
        }, 700);
      } else {
        btn.classList.add("wrong");
        mistakes += 1;
        coins = Math.max(0, coins - 5);
        updateHUD();

        // Ù†Ø´Ø§Ù† Ø¯Ø§Ø¯Ù† Ù¾Ø§Ø³Ø® Ø¯Ø±Ø³Øª Ø¨Ù‡â€ŒØµÙˆØ±Øª Ø¸Ø±ÛŒÙ Ù¾Ø³ Ø§Ø² Ø®Ø·Ø§ Ø§ÙˆÙ„/Ø¯ÙˆÙ…ØŸ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ: Ø®ÛŒØ±)
        if(mistakes === 2){
          // ÙˆÙ‚ÙÙ‡ Ûµ Ø«Ø§Ù†ÛŒÙ‡â€ŒØ§ÛŒ
          showCooldown(5).then(()=>{
            lockChoices(false);
            btn.classList.remove("wrong");
          });
        } else if(mistakes >= 3){
          // Ø¬Ø±ÛŒÙ…Ù‡ Ø§Ø¶Ø§ÙÙ‡ Ùˆ Ø±ÙØªÙ† Ø¨Ù‡ Ù…Ø±Ø­Ù„Ù‡ Ø¨Ø¹Ø¯
          coins = Math.max(0, coins - 10);
          updateHUD();
          setTimeout(()=>{
            nextLevel();
          }, 550);
        } else {
          // ÛŒÚ© Ø§Ø´ØªØ¨Ø§Ù‡: Ø§Ø¬Ø§Ø²Ù‡ ØªÙ„Ø§Ø´ Ù…Ø¬Ø¯Ø¯
          setTimeout(()=>{
            lockChoices(false);
            btn.classList.remove("wrong");
          }, 450);
        }
      }
    }

    function showCooldown(seconds){
      overlayEl.classList.add("show");
      return new Promise(resolve=>{
        let t = seconds;
        cooldownEl.textContent = t.toString();
        const iv = setInterval(()=>{
          t--;
          cooldownEl.textContent = t.toString();
          if(t<=0){
            clearInterval(iv);
            overlayEl.classList.remove("show");
            resolve();
          }
        },1000);
      });
    }

    function nextLevel(){
      idx++;
      if(idx >= levels.length){
        endGame();
      } else {
        renderLevel();
      }
    }

    function endGame(){
      // ØªÚ©Ù…ÛŒÙ„ Ù†ÙˆØ§Ø± Ù¾ÛŒØ´Ø±ÙØª
      progressFillEl.style.width = "100%";
      progressTextEl.textContent = "100% Ù¾ÛŒØ´Ø±ÙØª";

      finalScoreEl.textContent = score.toString();
      finalCoinsEl.textContent = coins.toString();
      finalMsgEl.textContent = score >= 150
        ? "Ø´Ø§Ù‡Ú©Ø§Ø± Ù‚Ø¶Ø§ÛŒÛŒ! ØªÙ†Ø§Ø³Ø¨ Ùˆ Ø¹Ø¯Ø§Ù„Øª Ø±Ø§ Ø®ÙˆØ¨ Ø±Ø¹Ø§ÛŒØª Ú©Ø±Ø¯ÛŒ."
        : score >= 100
          ? "Ø¹Ø§Ù„ÛŒ Ø¨ÙˆØ¯! Ú†Ù†Ø¯ Ù…ÙˆØ±Ø¯ Ø¬Ø§ÛŒ Ø¨Ù‡Ø¨ÙˆØ¯ Ø¯Ø§Ø±Ø¯."
          : "Ø®ÙˆØ¨Ù‡! Ø¨Ø§ Ø¯Ù‚Øª Ø¨Ù‡ Ø¬Ø²Ø¦ÛŒØ§Øª Ù¾Ø±ÙˆÙ†Ø¯Ù‡â€ŒÙ‡Ø§ Ø¨Ù‡ØªØ± Ù…ÛŒâ€ŒØ´ÛŒ.";

      document.querySelector(".stage").style.display = "none";
      document.querySelector(".help").style.display = "none";
      endEl.classList.add("show");
    }

    restartBtn.addEventListener("click", ()=>{
      idx = 0; score = 0; coins = 100; mistakes = 0; locked = false;
      document.querySelector(".stage").style.display = "";
      document.querySelector(".help").style.display = "";
      endEl.classList.remove("show");
      renderLevel(); updateHUD();
    });

    // Ø´Ø±ÙˆØ¹
    renderLevel();
    updateHUD();
  </script>
</body>
  </html>
